# Newbie Java Doctor ğŸ©º

> ä½ çš„ Java å…¨é“¾è·¯æ€§èƒ½è°ƒä¼˜æ²™ç›’ä¸å®¹é‡è§„åˆ’å¯è§†åŒ–æ¨æ¼”å¹³å°ã€‚

**[ğŸ‘‰ ç‚¹å‡»è¿™é‡Œç›´æ¥ä½“éªŒ Live Demo ](https://null-object-0000.github.io/newbie-java-doctor/)**

![Demo](./demo.png)

## ğŸ’¡ ä¸ºä»€ä¹ˆåšè¿™ä¸ªé¡¹ç›®ï¼Ÿ

åœ¨çœŸå®çš„çº¿ä¸Šç¯å¢ƒä¸­ï¼Œé¢å¯¹â€œæ¥å£å“åº”æ…¢â€ã€â€œå¹¶å‘ä¸Šä¸å»â€æ—¶ï¼Œå¾€å¾€åªèƒ½é â€œçŒœâ€ï¼ˆç›²ç›®åŠ æœºå™¨ã€ä¹±è°ƒ Tomcat çº¿ç¨‹æ± æˆ– JVM å‚æ•°ï¼‰ã€‚ç°æœ‰çš„ APM å·¥å…·ï¼ˆå¦‚ SkyWalkingï¼‰åªèƒ½å‘Šè¯‰ä½ â€œç°åœ¨å‘ç”Ÿäº†ä»€ä¹ˆâ€ï¼Œè€Œå‹æµ‹å·¥å…·åªèƒ½å‘Šè¯‰ä½ â€œå‹åˆ°äº†å¤šå°‘â€ã€‚

**Newbie Java Doctor å¡«è¡¥äº†â€œå®¹é‡é™æ€è§„åˆ’â€ä¸â€œè°ƒä¼˜æ•™å­¦â€ä¹‹é—´çš„ç©ºç™½ï¼š**

1. **å¯è§†åŒ–æ’é˜Ÿè®ºæ²™ç›’**ï¼šå°†ç„å­¦çš„æ€§èƒ½è°ƒä¼˜è½¬åŒ–ä¸ºåŸºäº Little's Lawï¼ˆåˆ©ç‰¹å°”æ³•åˆ™ï¼‰çš„æ ‡å‡†åŒ–æ•°å­¦æ¨¡å‹ã€‚
2. **çŸ¥å…¶ç„¶ï¼Œæ›´çŸ¥å…¶æ‰€ä»¥ç„¶**ï¼šä¸ä»…ç»™å‡ºå‚æ•°å»ºè®®ï¼Œæ›´ç›´è§‚å±•ç°ä¸€ä¸ª HTTP è¯·æ±‚æ˜¯å¦‚ä½•åœ¨ OS å†…æ ¸ã€JVMã€ä¸­é—´ä»¶ä¸­æµè½¬å¹¶è¢«æ’é˜Ÿé™åˆ¶çš„ã€‚
3. **ä¸º AI è¯Šæ–­æä¾›â€œç°åœºç¯å¢ƒâ€**ï¼šæ‰“ç ´å¤§æ¨¡å‹ï¼ˆChatGPT/Geminiï¼‰æ’æŸ¥æ•…éšœæ—¶ç¼ºä¹â€œæ¶æ„æ‹“æ‰‘ä¸åº•å±‚ç¯å¢ƒé…ç½®â€ä¸Šä¸‹æ–‡çš„å°´å°¬ã€‚

## âœ¨ æ ¸å¿ƒèƒ½åŠ›

* **å¯è§†åŒ–æ‹“æ‰‘å»ºæ¨¡** â€” æ‹–æ‹½èŠ‚ç‚¹ + è¿çº¿ï¼Œé›¶ä»£ç å¿«é€Ÿæ„å»ºä½ çš„ä¸šåŠ¡è¯·æ±‚é“¾è·¯æ‹“æ‰‘å›¾ã€‚
* **â€œWhat-ifâ€ æ²™ç›’æ¨æ¼”** â€” æ‰‹åŠ¨è°ƒæ•´ `maxThreads`ã€`somaxconn` ç­‰å‚æ•°ï¼Œå®æ—¶è§‚å¯Ÿå…¨é“¾è·¯ QPS å¤©èŠ±æ¿çš„å˜åŒ–ã€‚
* **åˆ†å±‚ç“¶é¢ˆç²¾å‡†å®šä½** â€” è‡ªåŠ¨è®¡ç®—å¸¦å®½ã€ç«¯å£ã€æ–‡ä»¶å¥æŸ„ã€çº¿ç¨‹æ± ç­‰ç»´åº¦çš„ç†è®ºæœ€å¤§ RPSï¼Œæ ‡çº¢ç»å¯¹ç“¶é¢ˆã€‚
* **æ™ºèƒ½é…ç½®æ¨è** â€” é’ˆå¯¹ç°æœ‰ç¼ºå£ï¼Œè‡ªåŠ¨ç”Ÿæˆç³»ç»Ÿçº§ä¸åº”ç”¨çº§çš„æœ€ä¼˜å‚æ•°è°ƒæ•´å»ºè®®ã€‚
* **ç»å…¸æ¡ˆä¾‹æ¨¡æ¿** â€” å†…ç½®å…¸å‹æ•…éšœåœºæ™¯ï¼ˆå¦‚æ…¢ä¾èµ–æ‹–å®çº¿ç¨‹æ± ï¼‰ï¼Œä¸€é”®åŠ è½½æ‹“æ‰‘å¹¶è‡ªåŠ¨åˆ†æç“¶é¢ˆï¼Œå¼€ç®±å³ç”¨ã€‚
* **é¶åœºå‹æµ‹éªŒè¯** â€” æä¾›çœŸå® Docker åŒ–å‹æµ‹æ²™ç›’ï¼ˆJava æœåŠ¡ + K6ï¼‰ï¼Œè®©ä½ äº²æ‰‹éªŒè¯ç†è®ºæ¨æ¼”ä¸å®é™…ååé‡çš„å»åˆåº¦ã€‚
* **ä¸€é”®ç¯å¢ƒæ¢é’ˆé‡‡é›†** â€” æä¾›è·¨å¹³å° Shell è„šæœ¬ï¼Œä¸€é”®æå–ç›®æ ‡ Linux å®¿ä¸»æœºä¸ JVM è¿è¡Œå‚æ•°ï¼Œç”Ÿæˆ JSON å¯¼å…¥å³ç”¨ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹ä¸æ¢é’ˆé‡‡é›†

**å¯¹äºç»å¤§å¤šæ•°ç”¨æˆ·ï¼Œæœ¬é¡¹ç›®æ— éœ€æœ¬åœ°å®‰è£…éƒ¨ç½²ï¼Œç›´æ¥è®¿é—® [Live Demo](https://null-object-0000.github.io/newbie-java-doctor/) å³å¯ä½¿ç”¨ã€‚**

å¦‚æœä½ æƒ³ç›´æ¥è¯Šæ–­è‡ªå·±çœŸå®çš„çº¿ä¸Šç¯å¢ƒï¼Œå¯ä»¥åœ¨ç›®æ ‡æœåŠ¡å™¨ï¼ˆLinuxï¼‰ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè‡ªåŠ¨æ¢æµ‹å®¿ä¸»æœºï¼ˆOS/å†…æ ¸é™åˆ¶ï¼‰ä¸è¿è¡Œæ—¶ï¼ˆJVM/Tomcatï¼‰å‚æ•°ï¼Œç”Ÿæˆå¯å¯¼å…¥çš„ JSON æ–‡ä»¶ï¼š

```bash
curl -fsSL https://raw.githubusercontent.com/null-object-0000/newbie-java-doctor/main/scripts/collect-params.sh | bash -s -- -o topology.json

```

é‡‡é›†å®Œæˆåï¼Œåœ¨ Web é¡µé¢ç‚¹å‡» **ã€Œå¯¼å…¥ã€** é€‰æ‹©åˆšåˆšç”Ÿæˆçš„ JSON æ–‡ä»¶ï¼Œå³å¯ç¬é—´è¿˜åŸçº¿ä¸Šç¯å¢ƒçº¦æŸå¹¶å¼€å§‹æ¨æ¼”ï¼

## ğŸ¯ é¶åœºæ¼”ç»ƒ (Playground)

é¡¹ç›®å†…ç½®äº†å¯ä¸€é”®å¯åŠ¨çš„ Docker åŒ–å‹æµ‹é¶åœºï¼Œç”¨äºéªŒè¯ç†è®ºæ¨æ¼”ä¸çœŸå®ååé‡çš„å»åˆåº¦ã€‚

### æ¡ˆä¾‹ 01ï¼šè¢«æ…¢ä¾èµ–æ‹–å®çš„èšåˆæœåŠ¡

> æ¨¡æ‹Ÿç»å…¸çº¿ä¸Šæ•…éšœï¼šä¸‹æ¸¸ç¬¬ä¸‰æ–¹ API å“åº”ç¼“æ…¢ (500ms)ï¼Œå¯¼è‡´ Tomcat çº¿ç¨‹æ± è¿…é€Ÿè€—å°½ï¼Œå¹¶å‘æš´è·Œã€‚

**éªŒè¯æµç¨‹ï¼š**

1. åœ¨ [Live Demo](https://null-object-0000.github.io/newbie-java-doctor/) ä¸­ç‚¹å‡» **ã€Œæ¡ˆä¾‹æ¨¡æ¿ã€** åŠ è½½æœ¬æ¡ˆä¾‹ï¼Œç†è®ºå¤©èŠ±æ¿ä¸º **400 QPS**ã€‚
2. å¯åŠ¨é¶åœºå¹¶æ³¨å…¥æµé‡ï¼š
   ```bash
   cd playground/demo-01-io-bound-bff
   docker-compose up -d
   docker-compose run --rm k6 run /scripts/test.js
   ```
3. K6 æŠ¥å‘Šä¸­çš„å®é™…ååé‡å°†ç²¾å‡†å¡åœ¨ **~400 RPS**ï¼Œä¸ç†è®ºæ¨æ¼”å»åˆã€‚

å…³é”®å‚æ•°å·²å¤–ç½®ä¸ºç¯å¢ƒå˜é‡ï¼Œ**ä¿®æ”¹å `docker-compose up -d` å³å¯é‡å¯ï¼Œæ— éœ€ rebuild**ï¼Œå¯è‡ªç”±è¿›è¡Œå¯¹æ¯”å®éªŒï¼ˆå¦‚å¼€å¯è™šæ‹Ÿçº¿ç¨‹ã€è°ƒæ•´çº¿ç¨‹æ± å¤§å°ç­‰ï¼‰ã€‚è¯¦è§ [`playground/demo-01-io-bound-bff/README.md`](./playground/demo-01-io-bound-bff/README.md)ã€‚

## ğŸ—ºï¸ æ¼”è¿›è·¯çº¿å›¾ (Roadmap)

æœ¬é¡¹ç›®æ­£å¤„äºå¿«é€Ÿè¿­ä»£ä¸­ï¼Œæœªæ¥çš„ç›®æ ‡æ˜¯å°†å®ƒæ‰“é€ ä¸ºæœ€æ‡‚åº•å±‚ç¯å¢ƒçš„æ™ºèƒ½è¯Šæ–­å¹³å°ï¼š

* [x] **åŸºç¡€æ¡†æ¶æ„å»º**ï¼šå®Œæˆ Vue3 + AntV X6 å¯è§†åŒ–æ‹–æ‹½ã€Pinia å†å²çŠ¶æ€å›æº¯æœºåˆ¶ã€‚
* [x] **æ ¸å¿ƒå¼•æ“é›å½¢**ï¼šå®ç°åŸºäº Client -> Host -> Runtime åŸºç¡€é“¾è·¯çš„å¤©èŠ±æ¿æ¨æ¼”ç®—æ³•ã€‚

* [ ] **é˜¶æ®µä¸€ï¼šæ‰“é€  Aha Moment (è¿›è¡Œä¸­)**
    * [x] éƒ¨ç½²çº¯å‰ç«¯ Live Demoï¼Œå®ç°å¼€ç®±å³ç”¨çš„å…å®‰è£…ä½“éªŒã€‚
    * [x] å†…ç½®ç»å…¸æ•…éšœæ²™ç›’æ¨¡æ¿ï¼Œé¦–ä¸ªæ¡ˆä¾‹ã€Œæ…¢ä¾èµ–æ‹–å®ä¸­é—´å±‚ â€” Tomcat çº¿ç¨‹æ± ç“¶é¢ˆã€å·²ä¸Šçº¿ï¼Œæ”¯æŒä¸€é”®åŠ è½½å¹¶è‡ªåŠ¨åˆ†æã€‚
    * [ ] æŒç»­è¡¥å……æ›´å¤šç»å…¸æ•…éšœæ¨¡æ¿ï¼ˆå¦‚ï¼šTCP å…¨è¿æ¥é˜Ÿåˆ—æº¢å‡ºå¡é¡¿ã€æ•°æ®åº“è¿æ¥æ± æ’é˜Ÿå‹å®ç½‘å…³ç­‰ï¼‰ã€‚
    * [x] æä¾› Docker åŒ–å‹æµ‹é¶åœºï¼ˆ`playground/`ï¼‰ï¼Œç”¨çœŸå®æµé‡éªŒè¯ç†è®ºæ¨æ¼”ç»“æœï¼Œæ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡è‡ªç”±è°ƒå‚è¿›è¡Œå¯¹æ¯”å®éªŒã€‚

* [ ] **é˜¶æ®µäºŒï¼šå¼•æ“å‡ç»´ä¸è°ƒä¼˜çŸ¥è¯†åº“**
    * [ ] å°†çº¿æ€§è®¡ç®—å¼•æ“é‡æ„ä¸º DAGï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰éå†ç®—æ³•ï¼Œæ”¯æŒå¤šåˆ†æ”¯å¤æ‚ä¾èµ–èŠ‚ç‚¹ï¼ˆRedisã€MySQLã€å¾®æœåŠ¡ï¼‰çš„åå‘å¹¶å‘å‹åˆ¶è®¡ç®—ã€‚
    * [ ] ä¸°å¯Œå‚æ•°ç§‘æ™®æŠ½å±‰ï¼ˆKnowledge Panelï¼‰ï¼Œç›´è§‚å±•ç¤ºå„å‚æ•°çš„ä½œç”¨ã€åº•å±‚æ’é˜Ÿè®ºå½±å“ï¼Œä»¥åŠåœ¨ Linux/Java ä¸­çš„æŸ¥è¯¢ä¸ä¿®æ”¹å‘½ä»¤ã€‚
    * [ ] **é…ç½®é¢æ¿ Code Modeï¼ˆä»£ç æ¨¡å¼ï¼‰**ï¼šå³ä¾§ç¼–è¾‘é¢æ¿æ”¯æŒåˆ‡æ¢ä¸ºä»£ç è§†å›¾ï¼Œæ ¹æ®èŠ‚ç‚¹é…ç½®ç±»å‹æ™ºèƒ½é€‚é…å±•ç¤ºæ ¼å¼ â€”â€” Spring Boot èŠ‚ç‚¹ä»¥ `application.properties` / `application.yml` å½¢å¼å‘ˆç°ï¼ŒApache HttpClient ç­‰ç»„ä»¶åˆ™ä»¥ Java ä»£ç ç‰‡æ®µå½¢å¼å±•ç¤ºï¼Œæ‰€è§å³æ‰€å¾—ã€‚
    * [ ] **å†…è”ä¼˜åŒ–å»ºè®®ä¸ç“¶é¢ˆè·³è½¬**ï¼šåˆ†æå®Œæˆåï¼Œåœ¨å³ä¾§é…ç½®é¢æ¿ä¸­ç›´æ¥æ ‡æ³¨ä¼˜åŒ–å»ºè®®ä¸é£é™©æç¤ºï¼ˆå¦‚å‚æ•°åä½è­¦å‘Šã€æ¨èå€¼å¯¹æ¯”ï¼‰ï¼›åŒæ—¶åœ¨åˆ†ææŠ¥å‘Šä¸­æ”¯æŒç‚¹å‡»ç“¶é¢ˆé¡¹ä¸€é”®æ¿€æ´»å¹¶è·³è½¬åˆ°å¯¹åº”èŠ‚ç‚¹çš„é…ç½®é¡µé¢ï¼Œå®ç°"å‘ç°é—®é¢˜ â†’ å®šä½è°ƒä¼˜"çš„é—­ç¯ä½“éªŒã€‚

* [ ] **é˜¶æ®µä¸‰ï¼šè‡ªåŠ¨åŒ–ä¸ AI èµ‹èƒ½**
    * [ ] **â€œä¸€é”® Promptâ€å¯¼å‡º**ï¼šå°†æ‹“æ‰‘ JSONã€ç“¶é¢ˆè¯Šæ–­ç»“æœä¸ç”¨æˆ·æŠ¥é”™æ—¥å¿—æ‹¼æ¥ï¼Œç”Ÿæˆé«˜è´¨é‡ AI è¯Šæ–­ Promptï¼Œä¸ºå¤§æ¨¡å‹æä¾›å®Œç¾çš„ç°åœºç¯å¢ƒä¸Šä¸‹æ–‡ã€‚
    * [ ] å¼€æ”¾æ ‡å‡† HTTP å¯¼å…¥åè®®ï¼Œæ¢ç´¢ä¸æˆç†Ÿ APM å¼€æºé¡¹ç›®ï¼ˆå¦‚ SkyWalking/Prometheusï¼‰ç»“åˆï¼Œç›´æ¥è¯»å–çº¿ä¸ŠçœŸå® RT ä¸ååé‡è¿›è¡Œæ¨æ¼”ã€‚
    * [ ] æ”¯æŒå°†å•ä¸ªæ‹“æ‰‘å›¾ä½œä¸º Sub-graphï¼ˆå­å›¾ï¼‰æš´éœ²ï¼Œä¾›å…¶ä»–æœåŠ¡ä½œä¸º HTTP Client å¼•å…¥ã€‚
    * [ ] **æ‹“æ‰‘é©±åŠ¨çš„ä»£ç é¢„è§ˆï¼ˆCode Playgroundï¼‰**ï¼šæä¾›å†…ç½®çš„åœ¨çº¿ä»£ç ç¼–è¾‘å™¨ç¯å¢ƒï¼ŒåŸºäºå½“å‰æ‹“æ‰‘å›¾è‡ªåŠ¨ç”Ÿæˆä¸€å¥—å®Œæ•´çš„ Spring Boot æ ¸å¿ƒä»£ç ä¸é…ç½®ç¤ºä¾‹ â€”â€” åŒ…å« Controller æ¥å£å®šä¹‰ã€ä¸­é—´ä»¶å®¢æˆ·ç«¯é…ç½®ç±»ï¼ˆå¦‚ `RestTemplate` / `RedisTemplate` Bean é…ç½®ï¼‰ã€`application.yml` ç­‰ï¼Œç›´è§‚å±•ç¤ºæ‹“æ‰‘ä¸­å„èŠ‚ç‚¹å‚æ•°æœ€ç»ˆè½åœ°åˆ°ä»£ç å±‚é¢çš„å®Œæ•´æ ·è²Œï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£"è°ƒäº†è¿™ä¸ªå‚æ•°ï¼Œä»£ç é‡Œåˆ°åº•é•¿ä»€ä¹ˆæ ·"ã€‚


## ğŸ—ï¸ é“¾è·¯åˆ†å±‚æ¨¡å‹

ä¸ºä¿è¯æ¨æ¼”çš„ä¸¥è°¨æ€§ï¼Œé¡¹ç›®å°†é“¾è·¯æ‹†è§£ä¸ºä»¥ä¸‹é€»è¾‘å±‚ï¼š

| é€»è¾‘åˆ†å±‚ | æè¿°è¯´æ˜ | æ¶µç›–å‚æ•°ä¸¾ä¾‹ |
| --- | --- | --- |
| **Client Layer** | è´Ÿè½½ç›®æ ‡å®šä¹‰ | å¹¶å‘ç”¨æˆ·æ•°ã€ç›®æ ‡ååé‡ (RPS)ã€é¢„æœŸå¤±è´¥ç‡ |
| **Access Layer** | æ¥å…¥ç½‘å…³å±‚ | Tengine / Nginx å·¥ä½œè¿›ç¨‹æ•°ã€è¿æ¥æ•°é™åˆ¶ |
| **Host Layer** | å®¿ä¸»ç¡¬ä»¶ä¸å†…æ ¸çº¦æŸ | vCPUã€å†…å­˜ã€NIC å¸¦å®½ã€TCP é˜Ÿåˆ—(somaxconn)ã€æ–‡ä»¶å¥æŸ„(fs.file-max) |
| **Runtime Layer** | åº”ç”¨ç¨‹åºè¿è¡Œæ—¶ | JDK ç‰ˆæœ¬ã€GC ååé‡ç›®æ ‡ã€Tomcat maxThreads / acceptCount |
| **Dependency Layer** | å¤–éƒ¨ä¾èµ–è°ƒç”¨ | Redis è¿æ¥æ± ã€MySQL è¿æ¥æ± ã€ä¸‹æ¸¸ HTTP æ¥å£è€—æ—¶ |

> è¿›é˜¶ç†è®ºç»†èŠ‚ï¼Œè¯·å‚é˜… [LinkLayer.md](https://www.google.com/search?q=./LinkLayer.md) å’Œ [Reference.md](https://www.google.com/search?q=./Reference.md)ã€‚

## ğŸ¤ å‚ä¸å…±å»º

æœ¬é¡¹ç›®è‡´åŠ›äºå°†â€œæ€§èƒ½è°ƒä¼˜â€è¿™ä¸€é«˜é—¨æ§›æŠ€èƒ½å¹³æ°‘åŒ–ã€å·¥å…·åŒ–ã€‚å¦‚æœä½ å¯¹æ’é˜Ÿè®ºç®—æ³•ã€Vue3 å¯è§†åŒ–äº¤äº’ã€æˆ–è€…åº•å±‚ä¸­é—´ä»¶åŸç†æ„Ÿå…´è¶£ï¼Œéå¸¸æ¬¢è¿æäº¤ PR åŠ å…¥æˆ‘ä»¬ï¼

**æœ¬åœ°å¼€å‘æŒ‡å—ï¼š**

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/null-object-0000/newbie-java-doctor.git
cd newbie-java-doctor

# 2. å®‰è£…ä¾èµ– (æ¨èä½¿ç”¨ Node 20+)
npm install

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

```

## ğŸ“„ License

æœ¬é¡¹ç›®åŸºäº [Apache-2.0](./LICENSE) åè®®å¼€æºã€‚